openapi: 3.0.3
info:
  title: Impact as a Service API
  description: |
    API REST para gestionar las iniciativas y clientes.
  version: 1.0.1
  contact:
    name: Soporte
    email: soporte@ejemplo.com

servers:
  - url: https://cx183st2r9.execute-api.us-west-1.amazonaws.com/dev
    description: Desarrollo
  - url: https://api.impact-as-a-service.com/
    description: Producción

security:
  - cognitoAuth: []

components:
  securitySchemes:
    cognitoAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: "Autenticación con Amazon Cognito (Bearer token) para mayor facilidad"
      
    apiKeyAuth:
      type: apiKey
      in: header
      name: x-api-key

    apiIVAuth:
      type: apiKey
      in: header
      name: x-api-iv

  schemas:
    Client:
      type: object
      properties:
        client_id:
          type: string
          description: ID único del cliente
          example: "11787212-bf6a-4dbb-b0b7-fea6e8639c38"
        name:
          type: string
          description: Nombre del cliente
          example: "Usuario 8"
        type:
          type: string
          description: Tipo de cliente (Persona o Empresa)
          example: "Persona"
        email:
          type: string
          format: email
          description: Correo electrónico del cliente
          example: "usuario6@gmail.com"
        phone:
          type: string
          description: Teléfono del cliente
          example: "8121525257"
        address:
          type: string
          description: Dirección del cliente
          example: "Calle ejemplo 7, 14555"
        description:
          type: string
          description: Descripción del cliente
          example: "Persona ejemplo 1"
        profile_image_url:
          type: string
          description: URL de la imagen de perfil
          example: ""
        creation_date:
          type: string
          format: date-time
          description: Fecha de creación del cliente
          example: "Mon, 24 Mar 2025 14:14:38 GMT"
        social_media:
          type: object
          description: Redes sociales del cliente
          properties:
            facebook:
              type: string
              description: URL de Facebook
              example: ""
            X:
              type: string
              description: URL de X (anteriormente Twitter)
              example: ""
            instagram:
              type: string
              description: URL de Instagram
              example: ""
            tiktok:
              type: string
              description: URL de TikTok
              example: ""
    ClientListResponse:
      type: object
      properties:
        status:
          type: integer
          description: Código de estado HTTP
          example: 200
        body:
          type: array
          description: Lista de clientes
          items:
            $ref: "#/components/schemas/Client"
            
    ClientResponse:
      type: object
      properties:
        status:
          type: integer
          description: Código de estado HTTP
          example: 200
        body:
          $ref: "#/components/schemas/Client"
          
          
          
            
    Need:
      type: object
      properties:
        need_id:
          type: string
          description: ID único de la necesidad
          example: "abc123"
        client_id:
          type: string
          description: ID del cliente asociado
          example: "11787212-bf6a-4dbb-b0b7-fea6e8639c38"
        name:
          type: string
          description: Nombre de la necesidad
          example: "Agua potable"
        description:
          type: string
          description: Descripción detallada de la necesidad
          example: "Se necesita agua potable para 50 personas durante 3 días"
        quantity:
          type: integer
          description: Cantidad requerida
          example: 50
        unit:
          type: string
          description: Unidad de medida
          example: "litros"
        creation_date:
          type: string
          format: date-time
          description: Fecha de creación
          example: "2025-03-24T14:00:00Z"
          
    ClientNeedsResponse:
      type: object
      properties:
        status:
          type: integer
          description: Código de estado HTTP
          example: 200
        body:
          type: array
          description: Lista de necesidades asociadas al cliente
          items:
            $ref: "#/components/schemas/Need"      
    
    MetricInput:
      type: object
      required:
        - name
        - unit
      properties:
        name:
          type: string
          description: Nombre de la métrica
          example: "CO2 reduction"
        unit:
          type: string
          description: Unidad de medida de la métrica
          example: "ppm"
        description:
          type: string
          description: Descripción detallada de la métrica
          example: "Cantidad de CO2 que absorben los pinos plantados"
    
    MetricResponse:
      type: object
      properties:
        status:
          type: integer
          example: 200
        body:
          type: object
          properties:
            metric_id:
              type: string
              format: uuid
              example: "d7f5f5f3-af42-4a00-8105-5b7c5892c7bb"
            initiative_id:
              type: string
              format: uuid
              example: "60bcb98d-905c-4c9c-aa48-644d8eedccb9"
            name:
              type: string
              example: "CO2 reduction"
            unit:
              type: string
              example: "ppm"
            description:
              type: string
              example: "Cantidad de CO2 que absorben los pinos plantados"
    
    ErrorResponse:
      type: object
      properties:
        status:
          type: integer
          example: 400
        message:
          type: string
          example: "Error description"  
    
    CommentInput:
      type: object
      required:
        - text
        - initiative_id
        - name
      properties:
        text:
          type: string
          description: Contenido del comentario
          example: "Máximo Ejemplo de comentario"
          maxLength: 500
        initiative_id:
          type: string
          format: uuid
          description: ID de la iniciativa asociada
          example: "c0817ca2-bb80-4b72-9b9a-1832163dca51"
        name:
          type: string
          description: Nombre del autor del comentario
          example: "Maximo 1"
          maxLength: 100
    
    CommentResponse:
      type: object
      properties:
        comment_id:
          type: string
          format: uuid
          example: "2bd68ec6-3221-4c08-a1c9-8d40c5450595"
        initiative_id:
          type: string
          format: uuid
          example: "c0817ca2-bb80-4b72-9b9a-1832163dca51"
        name:
          type: string
          example: "Maximo 1"
        text:
          type: string
          example: "Máximo Ejemplo de comentario"
        timestamp:
          type: string
          format: date-time
          example: "2025-03-25T17:11:42.333Z"
          
paths:
  /client:
    post:
      summary: Crear un nuevo cliente
      description: Crea un cliente con la información proporcionada.
      tags:
        - Clients
      security:
        - cognitoAuth: []
        - apiIVAuth: []
      requestBody:
        description: Datos del cliente a crear
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Client"
            example:
              name: "Usuario 8"
              type: "Persona"
              email: "usuario6@gmail.com"
              phone: "8121525257"
              address: "Calle ejemplo 7, 14555"
              description: "Persona ejemplo 1"
      responses:
        "201":
          description: Cliente creado exitosamente
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Client"
              example:
                client_id: "11787212-bf6a-4dbb-b0b7-fea6e8639c38"
                name: "Usuario 8"
                type: "Persona"
                email: "usuario6@gmail.com"
                phone: "8121525257"
                address: "Calle ejemplo 7, 14555"
                description: "Persona ejemplo 1"
                profile_image_url: ""
                creation_date: "Mon, 24 Mar 2025 14:14:38 GMT"
                social_media:
                  facebook: ""
                  X: ""
                  instagram: ""
                  tiktok: ""
        "400":
          description: Datos inválidos
        "401":
          description: No autorizado
    
    get:
      summary: Obtener todos los clientes
      description: Devuelve la lista de todos los clientes registrados.
      tags:
        - Clients
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      responses:
        "200":
          description: Lista de clientes obtenida con éxito
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ClientListResponse"
              example:
                status: 200
                body:
                  - client_id: "8c21106e-240b-4aec-96ab-07db5296d27f"
                    name: "Usuario 3"
                    type: "ONG"
                    email: "usuario3@gmail.com"
                    phone: "6182154891"
                    address: "Calle ejemplo 3, 32555"
                    description: "ONG ejemplo 2"
                    profile_image_url: ""
                    creation_date: "Mon, 10 Mar 2025 16:41:54 GMT"
                    social_media:
                      facebook: ""
                      X: ""
                      instagram: ""
                      tiktok: ""
                  - client_id: "08a4e268-1807-4fed-a3cf-ccd1c5e062ab"
                    name: "Fernando Tellez Drouaillet"
                    type: "Persona"
                    email: "ftd121201@gmail.com"
                    phone: "6182176686"
                    address: "16 DE SEPTIEMBRE 121"
                    description: "prueba foto"
                    profile_image_url: "https://bucket-profile-images-iaas.s3-us-west-2.amazonaws.com/a89cd62c-cac0-4598-be35-f7ad51873092.jpg"
                    creation_date: "Fri, 07 Mar 2025 19:35:17 GMT"
                    social_media:
                      facebook: ""
                      X: ""
                      instagram: ""
                      tiktok: ""
                  - client_id: "48b20bf8-1fa7-4291-b7fc-cb0ef629798a"
                    name: "Usuario 5"
                    type: "Empresa"
                    email: "usuario5@gmail.com"
                    phone: "8582154817"
                    address: "Calle ejemplo 5, 14555"
                    description: "Empresa ejemplo 2"
                    profile_image_url: ""
                    creation_date: "Mon, 10 Mar 2025 16:42:41 GMT"
                    social_media:
                      facebook: ""
                      X: ""
                      instagram: ""
                      tiktok: ""
        "400":
          description: Datos inválidos
        "401":
          description: No autorizado
    
    patch:
      summary: Actualizar un cliente existente
      description: Permite actualizar uno o varios campos de un cliente en la tabla `Clients`. Solo actualiza los campos que han cambiado. No sobrescribe campos con valores vacíos.
      tags:
        - Clients
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      requestBody:
        description: Datos a actualizar del cliente.
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                client_id:
                  type: string
                  example: "62c93bcd-4632-4057-9456-90c67dd5f7a3"
                  description: ID único del cliente.
                name:
                  type: string
                  example: "Máximo Josué CC"
                  description: Nombre del cliente.
                type:
                  type: string
                  example: "aPersona"
                  description: Tipo del cliente.
                email:
                  type: string
                  example: "correo@example.com"
                  description: Correo electrónico del cliente.
                phone:
                  type: string
                  example: "6182584173"
                  description: Número de teléfono del cliente.
                address:
                  type: string
                  example: "Calle de la modificación"
                  description: Dirección del cliente.
                description:
                  type: string
                  example: "Pruebas de funcionalidad"
                  description: Descripción del cliente.
      responses:
        "200":
          description: Cliente actualizado con éxito o sin cambios detectados.
          content:
            application/json:
              examples:
                ClienteActualizado:
                  value:
                    message: "Item updated"
                    updatedItem:
                      client_id: "62c93bcd-4632-4057-9456-90c67dd5f7a3"
                      name: "Máximo Josué CC"
                      type: "aPersona"
                      email: "correo@example.com"
                      phone: "6182584173"
                      address: "Calle de la modificación"
                      description: "Pruebas de funcionalidad"
                SinCambios:
                  value:
                    message: "No changes detected"
        "400":
          description: Error de validación por falta de `client_id`.
          content:
            application/json:
              example:
                error: "ID is required"
        "404":
          description: Cliente no encontrado.
          content:
            application/json:
              example:
                error: "Item not found"
        "500":
          description: Error interno del servidor.
          content:
            application/json:
              example:
                error: "Error message"
                
          
  /client/{client_id}:
    get:
      summary: Obtener un cliente por ID
      description: Devuelve la información de un cliente específico según su ID.
      tags:
        - Clients
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      parameters:
        - name: client_id
          in: path
          required: true
          description: ID único del cliente
          schema:
            type: string
            format: uuid
            example: "11787212-bf6a-4dbb-b0b7-fea6e8639c38"
      responses:
        "200":
          description: Cliente encontrado con éxito
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ClientResponse"
              example:
                status: 200
                body:
                  client_id: "11787212-bf6a-4dbb-b0b7-fea6e8639c38"
                  name: "Usuario X"
                  type: "Persona"
                  email: "usuario6@gmail.com"
                  phone: "8121525257"
                  address: "Calle ejemplo 7, 14555"
                  description: "Persona ejemplo 1"
                  profile_image_url: ""
                  creation_date: "Mon, 24 Mar 2025 14:14:38 GMT"
                  social_media:
                    facebook: ""
                    X: ""
                    instagram: ""
                    tiktok: ""
        "400":
          description: Parámetros inválidos
        "401":
          description: No autorizado
        "404":
          description: Cliente no encontrado        

  /clients/{slug}:
    get:
      summary: Obtener cliente por slug
      description: Recupera los datos completos de un cliente a partir de su slug único.
      tags:
        - Clients
      operationId: getClientBySlug
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      parameters:
        - name: slug
          in: path
          required: true
          description: Slug único del cliente
          schema:
            type: string
      responses:
        '200':
          description: Cliente encontrado correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  client_id:
                    type: string
                    example: abc123
                  name:
                    type: string
                    example: Nombre del Cliente
                  email:
                    type: string
                    example: correo@ejemplo.com
                  # Agrega más campos según los datos que devuelva tu tabla
        '404':
          description: Cliente no encontrado con el slug proporcionado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Client not found with given slug
        '500':
          description: Error del servidor al intentar recuperar el cliente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Error retrieving client
                  error:
                    type: string
                    example: Error detallado del servidor

  /clients/{client_id}/needs:
    get:
      summary: Obtener las necesidades de un cliente
      description: Devuelve una lista con las necesidades asociadas a un cliente específico.
      tags:
        - Clients
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      parameters:
        - name: client_id
          in: path
          required: true
          description: ID único del cliente
          schema:
            type: string
            format: uuid
            example: "11787212-bf6a-4dbb-b0b7-fea6e8639c38"
      responses:
        "200":
          description: Lista de necesidades encontradas
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ClientNeedsResponse"
              example:
                status: 200
                body:
                  - need_id: "abc123"
                    client_id: "11787212-bf6a-4dbb-b0b7-fea6e8639c38"
                    name: "Agua potable"
                    description: "Se necesita agua potable para 50 personas durante 3 días"
                    quantity: 50
                    unit: "litros"
                    creation_date: "2025-03-24T14:00:00Z"
                  - need_id: "def456"
                    client_id: "11787212-bf6a-4dbb-b0b7-fea6e8639c38"
                    name: "Alimentos no perecederos"
                    description: "Paquetes de alimentos para 20 familias"
                    quantity: 20
                    unit: "paquetes"
                    creation_date: "2025-03-25T10:00:00Z"
        "404":
          description: No se encontraron necesidades para el cliente
          content:
            application/json:
              example:
                status: 404
                message: "No se encontraron necesidades para el cliente"
        "500":
          description: Error interno del servidor
          content:
            application/json:
              example:
                status: 500
                message: "Error fetching client needs"
                error: "DynamoDB query error"
                
  
  /updateClientSM:
    patch:
      summary: Actualizar redes sociales de un cliente
      description: Permite actualizar las redes sociales de un cliente en la tabla `Clients`. Solo se actualizan los campos que han cambiado y no se sobrescriben los valores vacíos.
      tags:
        - Clients
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      requestBody:
        description: Datos de redes sociales a actualizar para un cliente.
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                client_id:
                  type: string
                  example: "62c93bcd-4632-4057-9456-90c67dd5f7a3"
                  description: ID único del cliente (obligatorio).
                social_media:
                  type: object
                  properties:
                    facebook:
                      type: string
                      example: "https://facebook.com/ejemplo"
                      description: URL del perfil de Facebook.
                    X:
                      type: string
                      example: "https://twitter.com/ejemplo"
                      description: URL del perfil de X (anteriormente Twitter).
                    instagram:
                      type: string
                      example: "https://instagram.com/ejemplo"
                      description: URL del perfil de Instagram.
                    tiktok:
                      type: string
                      example: "https://tiktok.com/@ejemplo"
                      description: URL del perfil de TikTok.
      responses:
        "200":
          description: Redes sociales actualizadas con éxito o sin cambios.
          content:
            application/json:
              examples:
                RedesActualizadas:
                  value:
                    message: "Social media updated"
                    updatedItem:
                      client_id: "62c93bcd-4632-4057-9456-90c67dd5f7a3"
                      name: "Máximo Josué CC"
                      social_media:
                        facebook: "https://facebook.com/ejemplo"
                        X: "https://twitter.com/ejemplo"
                        instagram: "https://instagram.com/ejemplo"
                        tiktok: "https://tiktok.com/@ejemplo"
        "400":
          description: Falta el `client_id` o los datos de redes sociales.
          content:
            application/json:
              example:
                message: "Client ID and social media data are required"
        "404":
          description: Cliente no encontrado.
          content:
            application/json:
              example:
                message: "Client not found"
        "500":
          description: Error interno del servidor.
          content:
            application/json:
              example:
                message: "Error updating social media"
              
              
  /initiatives:
    post:
      summary: "Crea una nueva iniciativa"
      description: "Este endpoint permite crear una nueva iniciativa, que puede estar enfocada en una causa medioambiental, social, etc."
      tags: 
        - Initiatives
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      operationId: "createInitiative"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - client_id
                - name
                - description
                - category
                - start_date
                - end_date
                - finished
                - goals
                - objectives
              properties:
                client_id:
                  type: string
                  description: "ID del cliente asociado a la iniciativa."
                name:
                  type: string
                  description: "Nombre de la iniciativa."
                description:
                  type: string
                  description: "Descripción de la iniciativa."
                category:
                  type: string
                  description: "Categoría de la iniciativa (e.g., Medio Ambiente)."
                start_date:
                  type: string
                  format: date
                  description: "Fecha de inicio de la iniciativa."
                end_date:
                  type: string
                  format: date
                  description: "Fecha de finalización de la iniciativa."
                finished:
                  type: boolean
                  description: "Indica si la iniciativa ha sido finalizada."
                goals:
                  type: array
                  items:
                    type: string
                  description: "Lista de metas de la iniciativa."
                objectives:
                  type: array
                  items:
                    type: object
                    properties:
                      name:
                        type: string
                        description: "Nombre del objetivo."
                      unit:
                        type: string
                        description: "Unidad de medición del objetivo (e.g., metros cuadrados, bombillas)."
                      quantity:
                        type: integer
                        description: "Cantidad del objetivo."
      responses:
        '200':
          description: "Iniciativa creada con éxito"
          content:
            application/json:
              schema:
                type: object
                properties:
                  initiative_id:
                    type: string
                    description: "ID único de la iniciativa creada."
                  client_id:
                    type: string
                    description: "ID del cliente asociado."
                  name:
                    type: string
                    description: "Nombre de la iniciativa."
                  description:
                    type: string
                    description: "Descripción de la iniciativa."
                  category:
                    type: string
                    description: "Categoría de la iniciativa."
                  creation_date:
                    type: string
                    format: date-time
                    description: "Fecha y hora de creación de la iniciativa."
                  start_date:
                    type: string
                    format: date
                    description: "Fecha de inicio de la iniciativa."
                  end_date:
                    type: string
                    format: date
                    description: "Fecha de finalización de la iniciativa."
                  initiative_image_url:
                    type: string
                    description: "URL de la imagen asociada a la iniciativa (si la tiene)."
                  finished:
                    type: boolean
                    description: "Indica si la iniciativa está finalizada."
                  goals:
                    type: array
                    items:
                      type: string
                    description: "Lista de metas de la iniciativa."
                  objectives:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: "Nombre del objetivo."
                        unit:
                          type: string
                          description: "Unidad de medición."
                        quantity:
                          type: integer
                          description: "Cantidad del objetivo."
        '400':
          description: "Solicitud incorrecta. Faltan parámetros requeridos o formato incorrecto."
        '500':
          description: "Error interno del servidor al crear la iniciativa."            
              
    get:
      summary: "Obtiene una lista de todas las iniciativas"
      description: "Este endpoint permite obtener todas las iniciativas almacenadas en la base de datos."
      tags: 
        - Initiatives
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      operationId: "getInitiatives"
      responses:
        '200':
          description: "Lista de iniciativas obtenida con éxito"
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    initiative_id:
                      type: string
                      description: "ID único de la iniciativa."
                    name:
                      type: string
                      description: "Nombre de la iniciativa."
                    description:
                      type: string
                      description: "Descripción de la iniciativa."
                    initiative_image_url:
                      type: string
                      description: "URL de la imagen asociada a la iniciativa."
                    client_id:
                      type: string
                      description: "ID del cliente asociado."
                    creation_date:
                      type: string
                      format: date-time
                      description: "Fecha y hora de creación de la iniciativa."
        '400':
          description: "Solicitud incorrecta. No se pudo procesar la petición."
        '500':
          description: "Error interno del servidor al obtener las iniciativas."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: "Descripción del error."
                  error:
                    type: string
                    description: "Mensaje de error detallado."          
    
    patch:
      summary: Actualizar iniciativa
      description: Actualiza una iniciativa existente en DynamoDB. Solo se actualizan los campos que hayan cambiado.
      tags:
        - Initiatives
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                initiative_id:
                  type: string
                  description: ID único de la iniciativa a actualizar.
                name:
                  type: string
                  description: Nuevo nombre de la iniciativa.
                description:
                  type: string
                  description: Nueva descripción de la iniciativa.
                end_date:
                  type: string
                  format: date
                  description: Nueva fecha de finalización (YYYY-MM-DD).
                finished:
                  type: boolean
                  description: Estado de finalización (true o false).
              required:
                - initiative_id
            example:
              initiative_id: "123"
              name: "Nueva Iniciativa"
              description: "Actualización de la iniciativa"
              end_date: "2025-12-31"
              finished: true

      responses:
        "200":
          description: Iniciativa actualizada exitosamente o sin cambios detectados.
          content:
            application/json:
              examples:
                Actualizado:
                  value:
                    message: "Item updated"
                    updatedItem:
                      initiative_id: "123"
                      name: "Nueva Iniciativa"
                      description: "Actualización de la iniciativa"
                      end_date: "2025-12-31"
                      finished: true
                Sin cambios:
                  value:
                    message: "No changes detected"

        "400":
          description: Error en la solicitud (faltan campos o formato inválido).
          content:
            application/json:
              examples:
                Falta ID:
                  value:
                    error: "ID is required"
                JSON inválido:
                  value:
                    error: "Invalid JSON format"

        "404":
          description: Iniciativa no encontrada.
          content:
            application/json:
              example:
                error: "Item not found"

        "500":
          description: Error interno del servidor.
          content:
            application/json:
              example:
                error: "Error message describing the issue"
              
  /initiatives/{initiative_id}:
    get:
      summary: "Obtiene una iniciativa por su ID"
      description: "Este endpoint permite obtener una iniciativa específica a partir de su ID único (initiative_id)."
      tags: 
        - Initiatives
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      operationId: "getInitiativeById"
      parameters:
        - in: path
          name: initiative_id
          required: true
          description: "ID único de la iniciativa que se desea obtener."
          schema:
            type: string
      responses:
        '200':
          description: "Iniciativa obtenida con éxito"
          content:
            application/json:
              schema:
                type: object
                properties:
                  initiative_id:
                    type: string
                    description: "ID único de la iniciativa."
                  name:
                    type: string
                    description: "Nombre de la iniciativa."
                  description:
                    type: string
                    description: "Descripción de la iniciativa."
                  initiative_image_url:
                    type: string
                    description: "URL de la imagen asociada a la iniciativa."
                  client_id:
                    type: string
                    description: "ID del cliente asociado."
                  creation_date:
                    type: string
                    format: date-time
                    description: "Fecha y hora de creación de la iniciativa."
                  start_date:
                    type: string
                    format: date
                    description: "Fecha de inicio de la iniciativa."
                  end_date:
                    type: string
                    format: date
                    description: "Fecha de finalización de la iniciativa."
                  category:
                    type: string
                    description: "Categoría de la iniciativa."
                  finished:
                    type: boolean
                    description: "Indica si la iniciativa ha sido finalizada."
                  goals:
                    type: array
                    items:
                      type: string
                    description: "Lista de metas de la iniciativa."
                  objectives:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: "Nombre del objetivo."
                        unit:
                          type: string
                          description: "Unidad de medición del objetivo."
                        quantity:
                          type: number
                          description: "Cantidad del objetivo."
        '400':
          description: "Solicitud incorrecta. No se pudo procesar la petición."
        '404':
          description: "Iniciativa no encontrada con el ID proporcionado."
        '500':
          description: "Error interno del servidor al obtener la iniciativa."
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: "Descripción del error."
                  error:
                    type: string
                    description: "Mensaje de error detallado."            
   
    delete:
      summary: Eliminar iniciativa
      description: Elimina una iniciativa existente en DynamoDB a través de su ID.
      tags:
        - Initiatives
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      parameters:
        - name: initiative_id
          in: path
          required: true
          description: ID único de la iniciativa a eliminar.
          schema:
            type: string

      responses:
        "200":
          description: Iniciativa eliminada correctamente.
          content:
            application/json:
              example:
                message: "Iniciativa eliminada correctamente"

        "500":
          description: Error interno del servidor al intentar eliminar la iniciativa.
          content:
            application/json:
              example:
                message: "Error eliminando la iniciativa"
                error: "Descripción del error"
  
  /initiatives/getInitiativeCategoriesOfClient/{client_id}:
    get:
      summary: Obtener estadísticas de categorías e impactos por cliente
      description: |
        Consulta las iniciativas de un cliente específico y genera un reporte estadístico que incluye:
        - Distribución porcentual de iniciativas por categoría
        - Conteo de impactos por categoría
        - Total de iniciativas del cliente
        
        **Flujo de operación:**
        1. Consulta todas las iniciativas del cliente
        2. Agrupa por categoría
        3. Consulta los impactos asociados a cada iniciativa
        4. Calcula porcentajes y totales
      tags:
        - Initiatives
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      parameters:
        - name: client_id
          in: path
          required: true
          description: ID único del cliente a consultar
          schema:
            type: string
            format: uuid
            example: "fbc1ba07-3979-4eee-9798-df5c03137176"
      responses:
        '200':
          description: Estadísticas obtenidas exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Iniciativas y categorías con impactos"
                  totalInitiatives:
                    type: integer
                    description: Número total de iniciativas del cliente
                    example: 8
                  categoriesWithPercentage:
                    type: array
                    description: Distribución porcentual de categorías
                    items:
                      type: object
                      properties:
                        category:
                          type: string
                          description: Nombre de la categoría
                          example: "Environment"
                        count:
                          type: integer
                          description: Número de iniciativas en esta categoría
                          example: 3
                        percentage:
                          type: string
                          description: Porcentaje del total (formateado)
                          example: "37.50%"
                  impactsByCategory:
                    type: array
                    description: Impactos ordenados por categoría (mayor a menor)
                    items:
                      type: object
                      properties:
                        category:
                          type: string
                          example: "Environment"
                        totalImpacts:
                          type: integer
                          description: Total de impactos en esta categoría
                          example: 15
              example:
                message: "Iniciativas y categorías con impactos"
                totalInitiatives: 8
                categoriesWithPercentage:
                  - category: "Environment"
                    count: 3
                    percentage: "37.50%"
                  - category: "Education"
                    count: 2
                    percentage: "25.00%"
                impactsByCategory:
                  - category: "Environment"
                    totalImpacts: 15
                  - category: "Education"
                    totalImpacts: 8
        '200 (sin resultados)':
          description: Cliente sin iniciativas registradas
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "No hay iniciativas para este cliente."
                  totalInitiatives:
                    type: integer
                    example: 0
                  categoriesWithPercentage:
                    type: array
                    example: []
                  impactsByCategory:
                    type: array
                    example: []
        '400':
          description: Falta el parámetro client_id
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "El campo 'client_id' es obligatorio."
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Error al consultar"
                  error:
                    type: string
                    example: "Cannot read property 'Items' of undefined"


  /initiatives/{initiative_id}/metrics:
    post:
      summary: Agregar métrica a una iniciativa
      description: Agrega una métrica a una iniciativa específica mediante su ID.
      tags:
        - Metrics
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      parameters:
        - name: initiative_id
          in: path
          required: true
          description: ID único de la iniciativa a la que se añadirá la métrica.
          schema:
            type: string

      requestBody:
        description: Datos de la métrica a agregar.
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  description: Nombre de la métrica.
                  example: "CO2 reduction"
                unit:
                  type: string
                  description: Unidad de medida.
                  example: "ppm"
                description:
                  type: string
                  description: Descripción de la métrica.
                  example: "Cantidad de CO2 que absorben los pinos plantados"

      responses:
        "200":
          description: Métrica agregada correctamente.
          content:
            application/json:
              example:
                status: 200
                body: |
                  {
                    "metric_id": "d7f5f5f3-af42-4a00-8105-5b7c5892c7bb",
                    "initiative_id": "60bcb98d-905c-4c9c-aa48-644d8eedccb9",
                    "name": "CO2 reduction",
                    "unit": "ppm",
                    "description": "Cantidad de CO2 que absorben los pinos plantados"
                  }

        "400":
          description: Solicitud inválida, datos faltantes o formato incorrecto.
          content:
            application/json:
              example:
                message: "Invalid request. Missing required fields."

        "500":
          description: Error interno del servidor al agregar la métrica.
          content:
            application/json:
              example:
                message: "Error al agregar la métrica"
                error: "Descripción del error"
    
    get:
      summary: Obtener métricas de una iniciativa
      description: Obtiene la lista de métricas asociadas a una iniciativa específica mediante su ID.
      tags:
        - Metrics
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      parameters:
        - name: initiative_id
          in: path
          required: true
          description: ID único de la iniciativa.
          schema:
            type: string

      responses:
        "200":
          description: Lista de métricas obtenida correctamente.
          content:
            application/json:
              example:
                status: 200
                body: |
                  [
                    {
                      "metric_id": "d7f5f5f3-af42-4a00-8105-5b7c5892c7bb",
                      "initiative_id": "60bcb98d-905c-4c9c-aa48-644d8eedccb9",
                      "name": "CO2 reduction",
                      "unit": "ppm",
                      "description": "Cantidad de CO2 que absorben los pinos plantados"
                    },
                    {
                      "metric_id": "eac50d48-8e78-4bff-877d-a10252008d13",
                      "initiative_id": "60bcb98d-905c-4c9c-aa48-644d8eedccb9",
                      "name": "CO2 reduction",
                      "unit": "ppm",
                      "description": "Cantidad de CO2 que absorben los pinos plantados"
                    }
                  ]

        "404":
          description: Iniciativa no encontrada o sin métricas asociadas.
          content:
            application/json:
              example:
                message: "No se encontraron métricas para esta iniciativa."

        "500":
          description: Error interno del servidor al obtener las métricas.
          content:
            application/json:
              example:
                message: "Error al obtener las métricas"
                error: "Descripción del error"
    
  /initiatives/{initiative_id}/needs:
    post:
      summary: Agregar una necesidad a una iniciativa
      description: Agrega una necesidad asociada a una iniciativa específica mediante su ID.
      tags:
        - Needs
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      parameters:
        - name: initiative_id
          in: path
          required: true
          description: ID único de la iniciativa.
          schema:
            type: string

      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                description:
                  type: string
                  description: Descripción de la necesidad.
                  example: "Se requieren palas para cavar"
                type:
                  type: string
                  description: Tipo de necesidad (por ejemplo, Supplies, Services).
                  example: "Supplies"
                amount:
                  type: integer
                  description: Cantidad requerida.
                  example: 200
                unit:
                  type: string
                  description: Unidad de medida.
                  example: "UNITS"

      responses:
        "200":
          description: Necesidad agregada correctamente.
          content:
            application/json:
              example:
                need_id: "23be8c62-0f22-4170-9235-bb70411954ad"
                initiative_id: "b6560095-d629-42b4-aae9-80f741de2847"
                client_id: "fbc1ba07-3979-4eee-9798-df5c03137176"
                description: "Se requieren palas para cavar"
                type: "Supplies"
                amount: 200
                unit: "UNITS"
                creation_date: "Tue, 25 Mar 2025 14:32:25 GMT"
                cumulative_total: 0

        "400":
          description: Datos inválidos o faltantes.
          content:
            application/json:
              example:
                message: "Datos inválidos o faltantes."

        "404":
          description: Iniciativa no encontrada.
          content:
            application/json:
              example:
                message: "Iniciativa no encontrada."

        "500":
          description: Error interno del servidor al agregar la necesidad.
          content:
            application/json:
              example:
                message: "Error al agregar la necesidad"
                error: "Descripción del error"
    
    get:
      summary: Obtener todas las necesidades de una iniciativa
      description: Obtiene todas las necesidades asociadas a una iniciativa específica mediante su ID.
      tags:
        - Needs
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      parameters:
        - name: initiative_id
          in: path
          required: true
          description: ID único de la iniciativa.
          schema:
            type: string
            example: "60bcb98d-905c-4c9c-aa48-644d8eedccb9"

      responses:
        "200":
          description: Lista de necesidades asociadas a la iniciativa.
          content:
            application/json:
              example:
                status: 200
                body: |
                  [
                    {
                      "unit": "HRS",
                      "need_id": "078f53a4-58b2-459e-8c29-fffe8eb2e9fe",
                      "amount": 160,
                      "cumulative_total": 0,
                      "initiative_id": "60bcb98d-905c-4c9c-aa48-644d8eedccb9",
                      "description": "Se requiere apoyo laboral para compra de terrenos",
                      "creation_date": "Mon, 10 Mar 2025 17:12:24 GMT",
                      "type": "Volunteering"
                    },
                    {
                      "unit": "UNITS",
                      "need_id": "9e100402-11d5-484a-b645-71e5ec101be5",
                      "amount": 200,
                      "cumulative_total": 0,
                      "initiative_id": "60bcb98d-905c-4c9c-aa48-644d8eedccb9",
                      "description": "Se requieren palas para cavar",
                      "creation_date": "Mon, 10 Mar 2025 17:15:38 GMT",
                      "type": "Supplies"
                    },
                    {
                      "unit": "MXN",
                      "need_id": "daf5edc8-fcc2-4612-a611-2265754cae15",
                      "amount": 17500,
                      "cumulative_total": 0,
                      "initiative_id": "60bcb98d-905c-4c9c-aa48-644d8eedccb9",
                      "description": "Se requieren apoyo monetario para compra de terrenos",
                      "creation_date": "Mon, 10 Mar 2025 16:50:24 GMT",
                      "type": "Money"
                    }
                  ]

        "404":
          description: Iniciativa no encontrada o sin necesidades.
          content:
            application/json:
              example:
                message: "No needs found for the initiative"

        "500":
          description: Error interno del servidor.
          content:
            application/json:
              example:
                message: "Error al obtener las necesidades"
                error: "Descripción del error"
                
  /needs:
    get:
      summary: Obtener todas las necesidades
      description: Retorna la lista completa de necesidades (needs) existentes.
      tags:
        - Needs
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      responses:
        "200":
          description: Lista de necesidades obtenida correctamente.
          content:
            application/json:
              example:
                status: 200
                body:
                  - unit: "USD"
                    client_id: "08a4e268-1807-4fed-a3cf-ccd1c5e062ab"
                    need_id: "9a183484-7b94-4c5c-94b2-0135b5dc3aeb"
                    amount: 1212
                    cumulative_total: 310
                    initiative_id: "cf27d977-9a06-43b8-a7dc-a3f9a58dfc25"
                    description: "Prueba need"
                    creation_date: "Thu, 13 Mar 2025 14:55:08 GMT"
                    type: "FINANCIAL"
                  - unit: "HRS"
                    need_id: "078f53a4-58b2-459e-8c29-fffe8eb2e9fe"
                    amount: 160
                    cumulative_total: 0
                    initiative_id: "60bcb98d-905c-4c9c-aa48-644d8eedccb9"
                    description: "Se requiere apoyo laboral para compra de terrenos"
                    creation_date: "Mon, 10 Mar 2025 17:12:24 GMT"
                    type: "Volunteering"
                  - unit: "UNITS"
                    need_id: "9e100402-11d5-484a-b645-71e5ec101be5"
                    amount: 200
                    cumulative_total: 0
                    initiative_id: "60bcb98d-905c-4c9c-aa48-644d8eedccb9"
                    description: "Se requieren palas para cavar"
                    creation_date: "Mon, 10 Mar 2025 17:15:38 GMT"
                    type: "Supplies"

        "404":
          description: No se encontraron necesidades.
          content:
            application/json:
              example:
                message: "No se encontraron necesidades."

        "500":
          description: Error interno del servidor al obtener las necesidades.
          content:
            application/json:
              example:
                message: "Error al obtener las necesidades"
                error: "Descripción del error"
                
    patch:
      summary: Actualizar una necesidad
      description: Actualiza los datos de una necesidad específica.
      tags:
        - Needs
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                need_id:
                  type: string
                  description: ID único de la necesidad a actualizar.
                description:
                  type: string
                  description: Nueva descripción de la necesidad.
                amount:
                  type: string
                  description: Nueva cantidad requerida.
                cumulative_total:
                  type: string
                  description: Nuevo total acumulado.
                initiative_id:
                  type: string
                  description: ID de la iniciativa asociada.
            example:
              need_id: "64737256-63e5-44c8-9cd6-4b3880fd0ef4"
              description: "Cambio de descripcion"
              amount: "200"
              cumulative_total: "100"
              initiative_id: "b6560095-d629-42b4-aae9-80f741de2847"

      responses:
        "200":
          description: Necesidad actualizada correctamente.
          content:
            application/json:
              examples:
                ConCambios:
                  summary: Necesidad actualizada con cambios detectados.
                  value:
                    message: "Item updated"
                    updatedItem:
                      unit: "UNITS"
                      client_id: "fbc1ba07-3979-4eee-9798-df5c03137176"
                      need_id: "64737256-63e5-44c8-9cd6-4b3880fd0ef4"
                      amount: "500"
                      cumulative_total: "20"
                      initiative_id: "b6560095-d629-42b4-aae9-80f741de2847"
                      description: "Cambio de descripcion"
                      creation_date: "Fri, 14 Mar 2025 15:30:04 GMT"
                      type: "Supplies"

                SinCambios:
                  summary: Ningún cambio detectado.
                  value:
                    message: "No changes detected"

        "404":
          description: No se encontró la necesidad con el ID proporcionado.
          content:
            application/json:
              example:
                message: "Need not found"

        "500":
          description: Error interno del servidor al actualizar la necesidad.
          content:
            application/json:
              example:
                message: "Error al actualizar la necesidad"
                error: "Descripción del error"          
  
  /needs/{need_id}:
    get:
      summary: Obtener una necesidad por ID
      description: Obtiene los detalles de una necesidad específica usando su ID.
      tags:
        - Needs
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      parameters:
        - name: need_id
          in: path
          required: true
          description: ID único de la necesidad a consultar.
          schema:
            type: string
            example: "64737256-63e5-44c8-9cd6-4b3880fd0ef4"

      responses:
        "200":
          description: Necesidad encontrada correctamente.
          content:
            application/json:
              example:
                unit: "UNITS"
                client_id: "fbc1ba07-3979-4eee-9798-df5c03137176"
                need_id: "64737256-63e5-44c8-9cd6-4b3880fd0ef4"
                amount: "500"
                cumulative_total: "20"
                initiative_id: "b6560095-d629-42b4-aae9-80f741de2847"
                description: "Cambio de descripcion"
                creation_date: "Fri, 14 Mar 2025 15:30:04 GMT"
                type: "Supplies"

        "404":
          description: Necesidad no encontrada.
          content:
            application/json:
              example:
                message: "Need not found"

        "500":
          description: Error interno del servidor.
          content:
            application/json:
              example:
                message: "Error al obtener la necesidad"
                error: "Descripción del error"
              
  /initiativesofclient/{client_id}:
    get:
      summary: Obtiene las iniciativas de un cliente
      description: Devuelve una lista de iniciativas asociadas a un ID de cliente específico.
      tags:
        - Initiatives
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      parameters:
        - name: client_id
          in: path
          required: true
          description: ID del cliente cuyas iniciativas se desean obtener.
          schema:
            type: string
      responses:
        200:
          description: Lista de iniciativas asociadas al cliente.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    initiative_image_url:
                      type: string
                      example: "https://bucket-profile-images-iaas.s3-us-west-2.amazonaws.com/initiative-image.png"
                      description: URL de la imagen representativa de la iniciativa.
                    client_id:
                      type: string
                      example: "fbc1ba07-3979-4eee-9798-df5c03137176"
                      description: ID del cliente propietario de la iniciativa.
                    end_date:
                      type: string
                      format: date
                      example: "2025-09-06"
                      description: Fecha de finalización de la iniciativa.
                    start_date:
                      type: string
                      format: date
                      example: "2025-04-05"
                      description: Fecha de inicio de la iniciativa.
                    category:
                      type: string
                      example: "Medio Ambiente"
                      description: Categoría de la iniciativa.
                    goals:
                      type: array
                      items:
                        type: string
                      example: ["Aumentar la producción de Oxigeno en un 30% en la región"]
                      description: Lista de metas asociadas a la iniciativa.
                    initiative_id:
                      type: string
                      example: "76fca1cd-ca69-4be3-9ccb-51fa4f406e68"
                      description: ID único de la iniciativa.
                    description:
                      type: string
                      example: "Pruebas 5232323."
                      description: Descripción detallada de la iniciativa.
                    name:
                      type: string
                      example: "Iniciativa de pruebas 4"
                      description: Nombre de la iniciativa.
                    finished:
                      type: boolean
                      example: false
                      description: Indica si la iniciativa ha finalizado.
                    objectives:
                      type: array
                      items:
                        type: object
                        properties:
                          name:
                            type: string
                            example: "Conseguir un terreno adecuado"
                            description: Nombre del objetivo.
                          unit:
                            type: string
                            example: "metros cuadrados"
                            description: Unidad de medición del objetivo.
                          quantity:
                            type: integer
                            example: 10000
                            description: Cantidad correspondiente al objetivo.
                    creation_date:
                      type: string
                      format: date-time
                      example: "Mon, 24 Mar 2025 15:46:01 GMT"
                      description: Fecha de creación de la iniciativa.
        404:
          description: No se encontraron iniciativas para el cliente especificado.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "No initiatives found for this client"
        500:
          description: Error interno al obtener las iniciativas.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Error getting initiatives"
                  error:
                    type: string
                    example: "Internal server error details"
          
  /initiatives/{initiative_id}/impacts:
    post:
      summary: Agregar un impacto a una iniciativa
      description: Crea un impacto asociado a una iniciativa específica.
      tags:
        - Impacts
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      parameters:
        - name: initiative_id
          in: path
          required: true
          description: ID único de la iniciativa.
          schema:
            type: string
            example: "ebe68b3e-dead-458a-b10d-9843533ad9be"

      requestBody:
        required: true
        description: Datos del impacto a agregar.
        content:
          application/json:
            schema:
              type: object
              properties:
                type:
                  type: string
                  description: Tipo de impacto.
                  example: "Volunteering"
                amount:
                  type: integer
                  description: Cantidad del impacto.
                  example: 100
                unit:
                  type: string
                  description: Unidad de medida.
                  example: "HRS"
                description:
                  type: string
                  description: Descripción del impacto.
                  example: "Apoyo para completar el objetivo de reforestación"
                donator_id:
                  type: string
                  description: ID del donante asociado al impacto.
                  example: "8c21106e-240b-4aec-96ab-07db5296d27f"
                need_id:
                  type: string
                  description: ID de la necesidad asociada.
                  example: "6649ffc0-10b2-47ee-aadc-f578be930be8"

      responses:
        "201":
          description: Impacto creado exitosamente.
          content:
            application/json:
              example:
                impact_id: "b2c7a92d-e250-41c8-a925-00a0e58beade"
                initiative_id: "ebe68b3e-dead-458a-b10d-9843533ad9be"
                client_id: "fbc1ba07-3979-4eee-9798-df5c03137176"
                type: "Volunteering"
                amount: 100
                unit: "HRS"
                description: "Apoyo para completar el objetivo de reforestación"
                donator_id: "8c21106e-240b-4aec-96ab-07db5296d27f"
                creation_date: "Tue, 25 Mar 2025 15:25:20 GMT"
                need_id: "6649ffc0-10b2-47ee-aadc-f578be930be8"

        "400":
          description: Datos de entrada inválidos o faltantes.
          content:
            application/json:
              example:
                message: "Invalid request body"

        "404":
          description: Iniciativa o necesidad no encontrada.
          content:
            application/json:
              example:
                message: "Initiative or need not found"

        "500":
          description: Error interno del servidor.
          content:
            application/json:
              example:
                message: "Error al agregar el impacto"
                error: "Descripción del error"            
              
    get:
      summary: Retrieve impacts for a specific initiative
      description: This endpoint retrieves all impacts for a specific initiative identified by its initiative_id.
      tags:
        - Impacts
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      parameters:
        - name: initiative_id
          in: path
          required: true
          description: The ID of the initiative for which impacts are being retrieved.
          schema:
            type: string
            example: ebe68b3e-dead-458a-b10d-9843533ad9be
      responses:
        '200':
          description: A list of impacts associated with the specified initiative
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    impact_id:
                      type: string
                      description: The unique identifier for the impact
                      example: 038a634f-ed6b-451c-8a32-e1974fb71650
                    donator_id:
                      type: string
                      description: The ID of the donor who made the impact
                      example: 48b20bf8-1fa7-4291-b7fc-cb0ef629798a
                    amount:
                      type: number
                      description: The amount of the impact (in specified units)
                      example: 10000
                    unit:
                      type: string
                      description: The unit of the impact (e.g., "MXN" for money, "HRS" for hours)
                      example: MXN
                    description:
                      type: string
                      description: A short description of the impact
                      example: Apoyo para completar el objetivo de reforestación
                    creation_date:
                      type: string
                      format: date-time
                      description: The date and time when the impact was created
                      example: Thu, 13 Mar 2025 19:02:45 GMT
                    type:
                      type: string
                      description: The type of impact (e.g., "Money", "Volunteering", "Supplies")
                      example: Money
                    client_id:
                      type: string
                      description: The ID of the client associated with the impact
                      example: fbc1ba07-3979-4eee-9798-df5c03137176
                    need_id:
                      type: string
                      description: The ID of the need associated with the impact (optional)
                      example: 078f53a4-58b2-459e-8c29-fffe8eb2e9fe
        '404':
          description: Initiative not found
        '500':
          description: Internal server error          
    
  /impacts:
    post:
      summary: Consultar impactos por iniciativa y rango de fechas
      description: Obtiene la lista de impactos asociados a una iniciativa específica dentro de un periodo de tiempo.
      operationId: getImpactsByDate
      tags:
        - Impacts
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      requestBody:
        description: Parámetros para consultar los impactos
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - initiative_id
                - startDate
                - endDate
              properties:
                initiative_id:
                  type: string
                  example: "initiative-123"
                  description: ID de la iniciativa
                startDate:
                  type: string
                  format: date-time
                  example: "Thu, 13 Mar 2025 00:00:00 GMT"
                  description: Fecha de inicio en formato GMT
                endDate:
                  type: string
                  format: date-time
                  example: "Thu, 20 Mar 2025 23:59:59 GMT"
                  description: Fecha de fin en formato GMT
      responses:
        "200":
          description: Lista de impactos obtenida correctamente
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    impact_id:
                      type: string
                      example: "impact-456"
                      description: ID del impacto
                    initiative_id:
                      type: string
                      example: "initiative-123"
                      description: ID de la iniciativa asociada
                    client_id:
                      type: string
                      example: "client-789"
                      description: ID del cliente relacionado
                    creation_date:
                      type: string
                      example: "Thu, 14 Mar 2025 19:02:45 GMT"
                      description: Fecha de creación del impacto
                    description:
                      type: string
                      example: "Donación de 100 árboles"
                      description: Descripción del impacto
        "400":
          description: Parámetros faltantes o incorrectos
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "initiative_id, startDate y endDate son requeridos."
        "500":
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Error interno del servidor"
  
  /impacts/totalgiven:
    post:
      summary: "Contar impactos realizados por un donante en un rango de fechas"
      description: |
        Consulta en DynamoDB la cantidad total de impactos (donaciones/contribuciones) realizadas por un donante específico (`donator_id`)
        dentro de un rango de fechas (`start_date` y `end_date`). Retorna el conteo y las fechas exactas de cada impacto.
      tags:
        - Impacts
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - donator_id
                - start_date
                - end_date
              properties:
                donator_id:
                  type: string
                  description: "ID único del donante"
                  example: "8c21106e-240b-4aec-96ab-07db5296d27f"
                start_date:
                  type: string
                  format: date
                  description: "Fecha de inicio del rango (YYYY-MM-DD)"
                  example: "2025-03-01"
                end_date:
                  type: string
                  format: date
                  description: "Fecha de fin del rango (YYYY-MM-DD)"
                  example: "2025-03-31"
            example:
              donator_id: "8c21106e-240b-4aec-96ab-07db5296d27f"
              start_date: "2025-03-01"
              end_date: "2025-03-31"
      responses:
        '200':
          description: Conteo de impactos exitoso
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Donator impacts count"
                  count:
                    type: integer
                    description: "Número total de impactos encontrados"
                    example: 5
                  dates:
                    type: array
                    items:
                      type: string
                      format: date
                    description: "Lista de fechas de los impactos (YYYY-MM-DD)"
                    example: ["2025-03-15", "2025-03-22"]
              example:
                message: "Donator impacts count"
                count: 5
                dates: ["2025-03-15", "2025-03-22"]
        '400':
          description: Faltan campos obligatorios o formato inválido
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Los campos 'donator_id', 'start_date' y 'end_date' son obligatorios."
        '500':
          description: Error interno al consultar DynamoDB
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Error fetching donator impacts"
                  error:
                    type: string
                    example: "DynamoDB query error details"        

  /impacts/{client_id}:
    get:
      summary: Obtener todos los impactos de un cliente específico
      description: |
        Consulta en la base de datos todos los impactos asociados a un cliente específico utilizando su ID único.
        Retorna una lista completa de todos los impactos encontrados, incluyendo detalles como tipo, monto y fecha.
      tags:
        - Impacts
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      parameters:
        - name: client_id
          in: path
          required: true
          description: ID único del cliente cuyos impactos se desean consultar
          schema:
            type: string
            format: uuid
            example: "fbc1ba07-3979-4eee-9798-df5c03137176"
      responses:
        '200':
          description: Lista de impactos obtenida exitosamente
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    impact_id:
                      type: string
                      format: uuid
                      description: ID único del impacto
                      example: "b2c7a92d-e250-41c8-a925-00a0e58beade"
                    client_id:
                      type: string
                      format: uuid
                      description: ID del cliente asociado
                      example: "fbc1ba07-3979-4eee-9798-df5c03137176"
                    type:
                      type: string
                      description: Tipo de impacto (Volunteering, Financial support, Supplies)
                      example: "Financial support"
                    amount:
                      type: number
                      description: Monto del impacto (si aplica)
                      example: 1000
                    creation_date_day_only:
                      type: string
                      format: date
                      description: Fecha del impacto (YYYY-MM-DD)
                      example: "2025-03-15"
                    initiative_id:
                      type: string
                      format: uuid
                      description: ID de la iniciativa relacionada
                      example: "60bcb98d-905c-4c9c-aa48-644d8eedccb9"
              example:
                - impact_id: "b2c7a92d-e250-41c8-a925-00a0e58beade"
                  client_id: "fbc1ba07-3979-4eee-9798-df5c03137176"
                  type: "Financial support"
                  amount: 1000
                  creation_date_day_only: "2025-03-15"
                  initiative_id: "60bcb98d-905c-4c9c-aa48-644d8eedccb9"
                - impact_id: "038a634f-ed6b-451c-8a32-e1974fb71650"
                  client_id: "fbc1ba07-3979-4eee-9798-df5c03137176"
                  type: "Volunteering"
                  amount: 0
                  creation_date_day_only: "2025-03-10"
                  initiative_id: "60bcb98d-905c-4c9c-aa48-644d8eedccb9"
        '400':
          description: Falta el parámetro client_id en la URL
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "El parámetro client_id es requerido en la URL"
        '404':
          description: No se encontraron impactos para el cliente especificado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "No se encontraron impactos para este cliente"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Error al consultar los impactos"
                  error:
                    type: string
                    example: "Detalle del error de DynamoDB"

  /impacts/totalreceived:
    post:
      summary: "Contar impactos recibidos por un cliente en un rango de fechas"
      description: |
        Consulta en DynamoDB la cantidad total de impactos (donaciones/contribuciones) recibidas por un cliente específico (`client_id`)
        dentro de un rango de fechas (`start_date` y `end_date`). Utiliza un GSI optimizado para esta consulta y retorna solo el conteo (no los registros completos).
      tags:
        - Impacts
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - client_id
                - start_date
                - end_date
              properties:
                client_id:
                  type: string
                  format: uuid
                  description: "ID único del cliente beneficiario"
                  example: "fbc1ba07-3979-4eee-9798-df5c03137176"
                start_date:
                  type: string
                  format: date
                  description: "Fecha de inicio del periodo (YYYY-MM-DD)"
                  example: "2025-03-01"
                end_date:
                  type: string
                  format: date
                  description: "Fecha de fin del periodo (YYYY-MM-DD)"
                  example: "2025-03-31"
            example:
              client_id: "fbc1ba07-3979-4eee-9798-df5c03137176"
              start_date: "2025-03-01"
              end_date: "2025-03-31"
      responses:
        '200':
          description: Conteo de impactos exitoso
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Conteo de impactos exitoso"
                  client_id:
                    type: string
                    description: "ID del cliente consultado"
                  start_date:
                    type: string
                    description: "Fecha de inicio usada en la consulta"
                  end_date:
                    type: string
                    description: "Fecha de fin usada en la consulta"
                  total_impacts:
                    type: integer
                    description: "Número total de impactos recibidos"
              example:
                message: "Conteo de impactos exitoso"
                client_id: "fbc1ba07-3979-4eee-9798-df5c03137176"
                start_date: "2025-03-01"
                end_date: "2025-03-31"
                total_impacts: 12
        '400':
          description: Faltan campos obligatorios o formato inválido
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Los campos 'client_id', 'start_date' y 'end_date' son obligatorios."
        '500':
          description: Error interno al consultar DynamoDB
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Error al contar los impactos"
                  error:
                    type: string
                    example: "Cannot read property 'Count' of undefined"

  /impacts/Participations/{need_id}:
    get:
      summary: "Obtener contribuciones agrupadas por cliente para una necesidad específica"
      description: |
        Consulta en DynamoDB todos los impactos asociados a una necesidad específica (`need_id`) y los agrupa por cliente (`client_id`),
        sumando los montos totales y contando las donaciones individuales.
        
        **Características:**
        - Utiliza el índice global secundario (GSI) `NeedIdIndex` para búsquedas eficientes por `need_id`
        - Agrupa resultados automáticamente por `client_id`
        - Retorna montos acumulados y conteo de contribuciones por cliente
      tags:
        - Impacts
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      parameters:
        - name: need_id
          in: path
          required: true
          description: "ID único de la necesidad a consultar"
          schema:
            type: string
            format: uuid
            example: "9e100402-11d5-484a-b645-71e5ec101be5"
      responses:
        '200':
          description: Lista de contribuciones agrupadas por cliente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Contributions by need_id"
                  contributions:
                    type: array
                    items:
                      type: object
                      properties:
                        client_id:
                          type: string
                          format: uuid
                          description: "ID del cliente contribuyente"
                          example: "8c21106e-240b-4aec-96ab-07db5296d27f"
                        totalAmount:
                          type: number
                          description: "Suma acumulada de todos los aportes del cliente"
                          example: 1500
                        donationCount:
                          type: integer
                          description: "Número total de contribuciones individuales"
                          example: 3
              example:
                message: "Contributions by need_id"
                contributions:
                  - client_id: "8c21106e-240b-4aec-96ab-07db5296d27f"
                    totalAmount: 1500
                    donationCount: 3
                  - client_id: "48b20bf8-1fa7-4291-b7fc-cb0ef629798a"
                    totalAmount: 750
                    donationCount: 2
        '400':
          description: Falta el parámetro need_id en la URL
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "El campo 'need_id' es obligatorio."
        '404':
          description: No se encontraron contribuciones para la necesidad especificada
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "No se encontraron contribuciones para esta necesidad"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Error fetching contributions"
                  error:
                    type: string
                    example: "Cannot read property 'Items' of undefined"

  /initiatives/Contributors/{initiative_id}:
  get:
    summary: "Obtener contribuyentes únicos de una iniciativa"
    description: |
      Consulta todos los impactos asociados a una iniciativa específica y los agrupa por cliente (`client_id`),
      mostrando:
      - Total de contribuciones por cliente
      - Monto acumulado
      - Lista detallada de cada impacto individual
      
      **Características:**
      - Utiliza el índice GSI `InitiativeIdIndex` para búsquedas eficientes
      - Agrupación inteligente por `client_id`
      - Incluye metadatos detallados de cada contribución
    tags:
      - Initiatives
    security:
        - apiKeyAuth: []
        - apiIVAuth: []
    parameters:
      - name: initiative_id
        in: path
        required: true
        description: "ID único de la iniciativa a consultar"
        schema:
          type: string
          format: uuid
          example: "60bcb98d-905c-4c9c-aa48-644d8eedccb9"
    responses:
      '200':
        description: Lista de contribuyentes obtenida exitosamente
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: "Contribuyentes únicos por iniciativa"
                totalContributors:
                  type: integer
                  description: "Número total de contribuyentes distintos"
                  example: 2
                contributors:
                  type: array
                  items:
                    type: object
                    properties:
                      client_id:
                        type: string
                        format: uuid
                        description: "ID único del contribuyente"
                        example: "8c21106e-240b-4aec-96ab-07db5296d27f"
                      total_contributions:
                        type: integer
                        description: "Número total de aportes realizados"
                        example: 3
                      total_amount:
                        type: number
                        description: "Suma acumulada de todos los aportes"
                        example: 1500
                      contributions:
                        type: array
                        items:
                          type: object
                          properties:
                            impact_id:
                              type: string
                              description: "ID único del impacto"
                              example: "b2c7a92d-e250-41c8-a925-00a0e58beade"
                            amount:
                              type: number
                              description: "Monto del aporte individual"
                              example: 500
                            date:
                              type: string
                              format: date
                              description: "Fecha del aporte (YYYY-MM-DD)"
                              example: "2025-03-15"
            example:
              message: "Contribuyentes únicos por iniciativa"
              totalContributors: 2
              contributors:
                - client_id: "8c21106e-240b-4aec-96ab-07db5296d27f"
                  total_contributions: 3
                  total_amount: 1500
                  contributions:
                    - impact_id: "b2c7a92d-e250-41c8-a925-00a0e58beade"
                      amount: 500
                      date: "2025-03-15"
      '200 (sin resultados)':
        description: Iniciativa sin impactos registrados
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: "No hay impactos para esta iniciativa."
                totalContributors:
                  type: integer
                  example: 0
                contributors:
                  type: array
                  items: {}
                  example: []
      '400':
        description: Falta el parámetro initiative_id
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: "El campo 'initiative_id' es obligatorio."
      '500':
        description: Error interno del servidor
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: "Error al consultar los impactos"
                error:
                  type: string
                  example: "DynamoDB query error details"

  /comments:
    post:
      tags:
        - Comments
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      summary: Crea un nuevo comentario
      description: Añade un comentario a una iniciativa específica
      operationId: postComments
      requestBody:
        description: Datos del comentario a crear
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CommentInput'
      responses:
        '200':
          description: Comentario creado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentResponse'
        '400':
          description: Solicitud inválida (faltan campos requeridos o formato incorrecto)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Iniciativa no encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'            
              
  /notify-update:
    post:
      summary: Enviar notificación de actualizaciones a todos los usuarios
      description: Envía un correo electrónico a todos los usuarios registrados con un resumen de las actualizaciones del sistema.
      tags:
        - Notifications
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      requestBody:
        description: Información del correo a enviar
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                subject:
                  type: string
                  description: Asunto del correo electrónico
                  example: "Nuevas actualizaciones en la plataforma"
                message:
                  type: string
                  description: Contenido del mensaje del correo
                  example: "Hemos implementado nuevas funcionalidades y mejoras en nuestra plataforma. ¡Échales un vistazo!"
      responses:
        200:
          description: Correos enviados con éxito
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Correos enviados con éxito"
        500:
          description: Error al enviar las notificaciones
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Error al enviar notificaciones"            
  
  /notify-support:
    post:
      summary: Enviar notificación al área de soporte
      description: Envía un correo electrónico al área de soporte con la información de la consulta del usuario.
      tags:
        - Notifications
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      requestBody:
        description: Información de la consulta del usuario
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  description: Nombre del usuario
                  example: "Maximo"
                cause:
                  type: string
                  description: Motivo o causa de la consulta
                  example: "Ando viendo su soporte"
                description:
                  type: string
                  description: Detalle o descripción del problema
                  example: "Pues aquí calando si sí pueden mandar correos a soporte, si no, para reportarlos"
              required:
                - name
                - cause
                - description
      responses:
        200:
          description: Notificación enviada con éxito
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Notificación enviada con éxito"
        400:
          description: Error por campos faltantes
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Todos los campos son obligatorios"
        500:
          description: Error al enviar la notificación
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Error al enviar notificación"
  
  /generateInitiativeReport:
    post:
      summary: Generar reporte de iniciativas
      description: |
        Genera un archivo JSON con información detallada de las iniciativas seleccionadas, incluyendo:
        - **Datos básicos de la iniciativa** (ID, nombre, fecha de creación, etc.).
        - **Cliente asociado** (nombre del cliente creador).
        - **Métricas** asociadas a la iniciativa.
        - **Necesidades** registradas para la iniciativa.
        - **Impactos** generados por la iniciativa.
        El archivo se almacena en S3 y se devuelve una URL prefirmada para descargarlo.
      tags:
        - Reports
      security:
        - apiKeyAuth: []
        - apiIVAuth: []
      requestBody:
        description: Lista de IDs de iniciativas para generar el reporte
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                initiative_ids:
                  type: array
                  items:
                    type: string
                  description: Lista de IDs de iniciativas
                  example: 
                    - "initiative-123"
                    - "initiative-456"
              required:
                - initiative_ids
      responses:
        200:
          description: Reporte generado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Reporte generado exitosamente"
                  url:
                    type: string
                    description: URL prefirmada para descargar el reporte
                    example: "https://bucket-reports-iaas.s3.us-west-2.amazonaws.com/reports/initiatives_report_1711494000000.json?X-Amz-Expires=3600"
        400:
          description: Solicitud incorrecta, faltan parámetros o datos inválidos
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "initiative_ids es requerido y debe ser un array"
        404:
          description: No se encontraron iniciativas
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "No se encontraron iniciativas"
        500:
          description: Error interno al generar el reporte
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Error interno al generar el reporte"

  /signup:
    post:
      summary: Registro de usuario en Cognito
      description: |
        Registra un nuevo usuario en Amazon Cognito con su correo electrónico y contraseña. 
        - **Correo electrónico:** Se utiliza como nombre de usuario.
        - **Contraseña:** Debe cumplir con las políticas de Cognito (mayúsculas, minúsculas, números, caracteres especiales, etc.).
        - **Verificación:** Se envía un correo electrónico de verificación a la dirección ingresada.
      tags:
        - Auth
      requestBody:
        description: Datos del usuario a registrar
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                  description: Correo electrónico del usuario
                  example: "minimaxcc8@gmail.com"
                password:
                  type: string
                  description: Contraseña del usuario
                  example: "Password123!"
              required:
                - email
                - password
      responses:
        201:
          description: Usuario registrado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Usuario registrado correctamente. Verifica tu correo electrónico."
        400:
          description: Datos inválidos o formato incorrecto
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Correo electrónico o contraseña no válidos."
        409:
          description: Usuario ya registrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "El usuario ya existe."
        500:
          description: Error interno al registrar el usuario
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Error interno al registrar el usuario."            
              
  /confirmSignUp:
    post:
      summary: Confirmar registro de usuario en Cognito
      description: |
        Verifica la cuenta de un usuario recién registrado en Amazon Cognito. 
        - **Email:** Correo del usuario que se está verificando.
        - **Código de confirmación:** El código de verificación enviado al correo electrónico.
        - Si la confirmación es exitosa, la cuenta queda activa.
      tags:
        - Auth
      requestBody:
        description: Datos para verificar la cuenta
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                  description: Correo electrónico del usuario
                  example: "minimaxcc8@gmail.com"
                confirmationCode:
                  type: string
                  description: Código de confirmación enviado al correo
                  example: "595935"
              required:
                - email
                - confirmationCode
      responses:
        200:
          description: Cuenta verificada exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Cuenta verificada con éxito."
        400:
          description: Código inválido o error de verificación
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Código incorrecto o expirado."
        500:
          description: Error interno al confirmar la cuenta
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Error interno al verificar la cuenta."
  
  /forgotPassword:
    post:
      summary: Solicitar código para restablecer contraseña
      description: |
        Envía un código de verificación por correo electrónico para permitir que el usuario cambie su contraseña en Amazon Cognito.
        - **Email:** Correo del usuario que solicita el cambio de contraseña.
        - El código enviado debe usarse en la función de restablecimiento (`resetPassword`).
      tags:
        - Auth
      requestBody:
        description: Correo electrónico del usuario
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                  description: Correo electrónico del usuario registrado
                  example: "minimaxcc8@gmail.com"
              required:
                - email
      responses:
        200:
          description: Código enviado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Código enviado al correo electrónico."
        400:
          description: Correo no registrado o formato incorrecto
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "El correo no está registrado."
        500:
          description: Error interno al enviar el código
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Error interno al enviar el código."
          
  /resetPassword:
    post:
      summary: Restablecer contraseña
      description: |
        Permite restablecer la contraseña de un usuario en Amazon Cognito utilizando el código de verificación enviado al correo electrónico.
        - **Email:** Correo del usuario que desea cambiar la contraseña.
        - **VerificationCode:** Código recibido por correo.
        - **NewPassword:** Nueva contraseña a establecer.
      tags:
        - Auth
      requestBody:
        description: Datos para restablecer la contraseña
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                  description: Correo del usuario
                  example: "usuario@example.com"
                verificationCode:
                  type: string
                  description: Código de verificación enviado por correo
                  example: "123456"
                newPassword:
                  type: string
                  format: password
                  description: Nueva contraseña a establecer
                  example: "NuevaContraseña123!"
              required:
                - email
                - verificationCode
                - newPassword
      responses:
        200:
          description: Contraseña restablecida exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Contraseña cambiada con éxito."
        400:
          description: Código de verificación inválido o expirado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Código de verificación incorrecto o expirado."
        500:
          description: Error interno al restablecer la contraseña
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Error interno al restablecer la contraseña."
            
  /login:
    post:
      summary: Iniciar sesión
      description: |
        Autentica a un usuario en Amazon Cognito utilizando su correo y contraseña.
        - Si las credenciales son correctas, devuelve un access token.
        - Este token se utilizará para autenticar las solicitudes futuras y acceder a la información del cliente en la tabla `clients`.
      tags:
        - Auth
      requestBody:
        description: Credenciales para iniciar sesión
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                  description: Correo del usuario
                  example: "minimaxcc8@gmail.com"
                password:
                  type: string
                  format: password
                  description: Contraseña del usuario
                  example: "Password123!"
              required:
                - email
                - password
      responses:
        200:
          description: Autenticación exitosa
          content:
            application/json:
              schema:
                type: object
                properties:
                  accessToken:
                    type: string
                    description: Token de acceso válido para autenticar solicitudes futuras
                    example: "eyJraWQiOiJrZXlJZCIsInR5cCI6IkpXVCIsImFsZyI6IkhTMjU2In0..."
        401:
          description: Credenciales inválidas
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Correo o contraseña incorrectos."
        500:
          description: Error interno al autenticar
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Error interno al autenticar usuario."
          
  /getClientFromMail:
    post:
      summary: Obtener información del cliente al tener permiso por el login
      description: |
        Obtiene la información base del cliente desde la tabla `clients` utilizando el correo electrónico.
        - Protegido por Amazon Cognito (autenticación con token Bearer).
        - Devuelve la información del cliente si existe.
      tags:
        - Auth
      requestBody:
        description: Correo del cliente a buscar
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                  description: Correo del cliente a buscar
                  example: "minimaxcc8@gmail.com"
              required:
                - email
      responses:
        200:
          description: Información del cliente encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  social_media:
                    type: object
                    properties:
                      X:
                        type: string
                        example: ""
                      instagram:
                        type: string
                        example: ""
                      tiktok:
                        type: string
                        example: ""
                      facebook:
                        type: string
                        example: ""
                  profile_image_url:
                    type: string
                    description: URL de la imagen de perfil
                    example: ""
                  client_id:
                    type: string
                    description: ID del cliente
                    example: "fbc1ba07-3979-4eee-9798-df5c03137176"
                  address:
                    type: string
                    description: Dirección del cliente
                    example: "Av. Juan Pablo II 9, fracc. Jardines del Guadiana, Durango, Dgo."
                  email:
                    type: string
                    description: Correo del cliente
                    example: "minimaxcc8@gmail.com"
                  description:
                    type: string
                    description: Descripción del cliente
                    example: "Validación de la creación de clientes 4"
                  phone:
                    type: string
                    description: Teléfono del cliente
                    example: "6185209631"
                  name:
                    type: string
                    description: Nombre del cliente
                    example: "Máximo Ejemplo"
                  creation_date:
                    type: string
                    format: date-time
                    description: Fecha de creación del cliente
                    example: "Mon, 10 Mar 2025 15:16:02 GMT"
                  type:
                    type: string
                    description: Tipo de cliente (Empresa, ONG, etc.)
                    example: "Empresa"
        404:
          description: Cliente no encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Cliente no encontrado."
        401:
          description: No autorizado (sin token o token inválido)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "No autorizado. Token inválido o no presente."
        500:
          description: Error interno al buscar el cliente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Error interno al buscar el cliente."
  
  /logout:
    post:
      summary: Cerrar sesión y destruir el access token
      description: |
        Destruye el access token generado durante el login para finalizar la sesión del usuario.
        - El token se debe enviar como Bearer token en la solicitud.
      tags:
        - Auth
      requestBody:
        description: Access token a destruir
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                accessToken:
                  type: string
                  description: Token de acceso que será destruido
                  example: "eyJraWQiOiJiTjFqMFBabHNSRENSdGVsckZHQUMzc1k4WFZLbU10U3RXV2piZlNaUTVNPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIwOGIxNDM1MC1iMGExLTcwYmQtMzA5Ni0yMzExYWI5MmJiYWIiLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtd2VzdC0yLmFtYXpvbmF3cy5jb21cL3VzLXdlc3QtMl9OeDlTVDl3TWgiLCJjbGllbnRfaWQiOiI2MjEwaTI4ZGxqYnNndnE1MjBybmY3ODlmOSIsIm9yaWdpbl9qdGkiOiJlYWFjYzhjYi1iNTYzLTQ1YWQtOTZkMi0yMzNkZDY3YTNjMzYiLCJldmVudF9pZCI6IjYxMDhiMjFiLTY3YzMtNDJjOS04NzZhLWRlNzUwNWU4MWJkNCIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYXdzLmNvZ25pdG8uc2lnbmluLnVzZXIuYWRtaW4iLCJhdXRoX3RpbWUiOjE3Mzk4OTczMzcsImV4cCI6MTczOTkwMDkzNywiaWF0IjoxNzM5ODk3MzM3LCJqdGkiOiI3OTUwZWEwZC03ODI0LTQ3ZjEtODZiYS02NjNkNDU4ZWM4ZDgiLCJ1c2VybmFtZSI6Im1pbmltYXhjYzhAZ21haWwuY29tIn0.Yixh6dWmahuZGu02LgxUELyH3OOyJEkBt14u0E0SghTfsdsLQQbAnDKLoghoXP50-A1Lw7Hf8EQ2L2qvq8HPCu_HJKVbEY4o3nDoIAoIS2q6S-Sed3ik5XKmCWp8I85ROacMU_057pe_Xjzj2peh49TmJgm8KBNErz4dE_AaT_gARNpfZD28MMKgypFXN9oNJhDqXrKRnGWW3ucE1W4GbZjMYDZ8bNhVVQv9exvQenUkEyonRdmM5U8bPLtjT9EjgK7taf8sUsxyrIa2FwQhTrHgr9b-bhG56Gmc28etWRoiwLNYZwHYj9JqhdYLkVte8ganZqPgo1nflBoRod8wuw"
              required:
                - accessToken
      responses:
        200:
          description: Sesión cerrada con éxito
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Sesión cerrada con éxito."
        401:
          description: No autorizado (sin token o token inválido)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "No autorizado. Token inválido o no presente."
        500:
          description: Error interno al cerrar la sesión
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Error interno al cerrar la sesión."
 
        
              